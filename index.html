<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Denizde Durum Tablosu</title>
  <link rel="stylesheet" href="style.css" />

  <!-- jsPDF ve AutoTable kÃ¼tÃ¼phaneleri -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>Denizde Durum Tablosu</h1>
    <button id="downloadPdfButton">ðŸ“„ Tabloyu PDF Olarak Ä°ndir</button>

    <div class="table-container">
      <table id="main-table">
        <thead id="table-headers"></thead>
        <tbody id="table-body"></tbody>
      </table>
    </div>
  </div>

  <!-- PDF HazÄ±rlanÄ±yor Perdesi -->
  <div id="pdf-overlay">PDF hazÄ±rlanÄ±yor, lÃ¼tfen bekleyin...</div>

  <!-- Uygulama Scripti -->
  <script src="app.js"></script>

  <!-- ðŸ“„ PDF Ä°NDÄ°RME (Veri TabanlÄ±) -->
  <script>
    document.getElementById("downloadPdfButton").addEventListener("click", () => {
      const overlay = document.getElementById("pdf-overlay");
      overlay.style.display = "flex";

      fetch("veriler.json")
        .then(res => res.json())
        .then(data => {
          const { jsPDF } = window.jspdf;
          const doc = new jsPDF("landscape", "mm", "a4");

          const headers = [[
            "Tarih/Saat",
            "RÃ¼zgar YÃ¶nÃ¼",
            "RÃ¼zgar HÄ±zÄ± (knot)",
            "RÃ¼zgar HÄ±zÄ± (bofor)",
            "Dalga YÃ¶nÃ¼",
            "Dalga YÃ¼ksekliÄŸi (m)",
            "Dalga Periyodu (sn)",
            "Hava Durumu",
            "SÄ±caklÄ±k (Â°C)",
            "BasÄ±nÃ§ (mb)"
          ]];

          const rows = data.map(item => [
            item["Tarih/Saat"] || "",
            item["Ruzgar Yonu"] || "",
            item["Hizi (knot)"] || "",
            item["Hizi (bofor)"] || "",
            item["Dalga Yonu"] || "",
            item["Yuksekligi (m)"] || "",
            item["Peryod (sn)"] || "",
            item["Hava Durumu"] || "",
            item["Sicaklik (C)"] || "",
            item["Basinc (mb)"] || ""
          ]);

          doc.autoTable({
            head: headers,
            body: rows,
            styles: { fontSize: 8 },
            headStyles: { fillColor: [57, 73, 171], halign: 'center' },
            startY: 20,
            margin: { left: 10, right: 10 }
          });

          doc.save("deniz_durumu_tablosu.pdf");
          overlay.style.display = "none";
        });
    });
  </script>
</body>
</html>
